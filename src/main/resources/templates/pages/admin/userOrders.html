<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>Admin - User Orders</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We"
            crossorigin="anonymous">
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj"
            crossorigin="anonymous"></script>
        <link href="/css/admin.css" rel="stylesheet">
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
            rel="stylesheet">
        <style>
        .container-custom {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        </style>
    </head>
    <body style="margin-top: 140px;">
        <div th:replace="~{layouts/navbar/adminNavbar :: adminNavbar}"></div>

        <div class="container mt-5 container-custom">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1 class="text-center"
                    th:text="'Orders for ' + ${user.username}"></h1>

                <a href="/admin/users" class="btn btn-secondary">
                    <i class="fas fa-arrow-left me-1"></i>
                    Back to Users
                </a>
            </div>

            <div th:if="${#lists.isEmpty(orders)}" class="text-center py-5">
                <i class="fas fa-shopping-bag fa-3x text-muted mb-3"></i>
                <h3 class="text-muted">No orders found</h3>
                <p class="text-muted">This user hasn't placed any orders
                    yet.</p>
            </div>

            <div th:unless="${#lists.isEmpty(orders)}" class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead class="thead-dark">
                        <tr>
                            <th>Order ID</th>
                            <th>Date</th>
                            <th>Status</th>
                            <th>Items</th>
                            <th>Payment Method</th>
                            <th>Total Price</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="order : ${orders}">
                            <td>
                                <span class="fw-bold text-primary"
                                    th:text="${#strings.substring(order.id.toString(), 0, 8)}">12345678</span>
                            </td>
                            <td
                                th:text="${#temporals.format(order.createdAt, 'MMM dd, yyyy HH:mm')}">Jan
                                01, 2024 12:00</td>
                            <td>
                                <span class="badge"
                                    th:class="${order.status == 'PENDING' ? 'bg-warning' : 
                                               order.status == 'CONFIRMED' ? 'bg-info' : 
                                               order.status == 'DELIVERED' ? 'bg-success' : 'bg-danger'}"
                                    th:text="${order.status}">PENDING</span>
                            </td>
                            <td>
                                <span th:text="${order.itemCount}">3</span>
                                item(s)
                            </td>
                            <td>
                                <i class="fas fa-credit-card me-1"
                                    th:if="${order.paymentMethod == 'CARD'}"></i>
                                <i class="fas fa-money-bill me-1"
                                    th:if="${order.paymentMethod == 'CASH'}"></i>
                                <i class="fab fa-paypal me-1"
                                    th:if="${order.paymentMethod == 'PAYPAL'}"></i>
                                <span
                                    th:text="${order.paymentMethod}">CARD</span>
                            </td>
                            <td class="fw-bold text-success">
                                â‚ª<span
                                    th:text="${#numbers.formatDecimal(order.totalPrice, 1, 2)}">25.99</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </body>
</html>
